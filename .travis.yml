dist: xenial
language: minimal

git:
  quiet: true
  submodules: false

branches:
  only:
  - master
  - deploy

env:
# Carefull, also set it in the deploy section!
- NOTES_FILE=main

services:
- docker

script:
- docker run --rm -v $(pwd):/notes blang/latex /bin/bash -c "cd /notes; ./build.sh $NOTES_FILE"
- "./test.sh $NOTES_FILE"

deploy:
  provider: releases
  api_key:
    secure: I6jq0Wz7+V9NMc4fQlEjJsIktwSz/L8/UcCd7m/gonj4KXWYyGWndbKTxpXd8GoX6v/m8iZ3wsT3zQwXsTh4mBqd0Om+br/opB5ObmEdyijjX0OOYSk5kQYHEASNdv3yBtbLb5ARlsM5lB0tG9R0llHla/E/CHkp279eD1gO0GDmDqbtSZgLfTsS0iSHwczeJdJj4/HT2pqhIUqU3xqvVeqmut6U0mIJitdhMNLL2seSokOYBnFmGVOVrVoHc+KbqS5zxsfCdDHIgvcjDop0vDbsYb3UbmuObthX32uNgyCp6TEYrK20bysCLaPGDoqAC6xnM0LzZigTelZh6CZG2nmI7TEmzLjXMft4Dby8U8/4obJuGmNNC+DORlt0dgW3SfVA9P6emecdsqveqysN0DhN20l+/hfSqjPVj9W8UODDP1yhMtFvbmiHb92OL3u1teRIcPdmptUv2t4OTmcVStkfTHj8QrCP00U1lTSMJLPz9itofOKl2oyPvTa8TXu6M4z0s0hzWEmOX6vrB81AjvTQYzJedX8an1d73yB6EiOiJDUJ9q7rcerR8Hl9t8Nv+4SC5f1r4ko00TJM5qEovJx77LbdgAiyoHdt5i0O9Y3GLWNrX1GjZ4x/Dc2d3vwMubKRbKSRg7VoWFp6xqFq7ul9E9iL8gtPR4wia/tPwdA=
  file: main.pdf
  skip_cleanup: true
  on:
    repo: icl-notes/m2pm3
